<head>
  <title>Hack Reactor Doorbell</title>
</head>

<body>
  {{> lockedOutMain }}
</body>

<template name="lockedOutMain">
  <div id="content">
    {{loginButtons align="right"}}
    <div class="lockedOut-title">
      {{#if request}}
        <h1>{{requestMessage}}</h1>
      {{/if}}
    </div>
    <div class="lockedOut-form">
      {{#if request}}
        {{#if claimed}}
        {{else}}
        <button class="claim">{{claimMessage}} Request!</button>
        {{/if}}
      {{else}}
      <button class="request">I'm locked out!</button>
      {{/if}}
    </div>
    <div class="lockedOut-history">
      <h2>Doorbell History</h2>
      <table class="lockedOut-history-table">
        <thead>
          <th>Created</th>
          <th>Claimed</th>
          <th>Requestor</th>
          <th>Claimer</th>
        </thead>
        <tbody>
        {{#each lockoutEntries}}
          {{> lockedOutHistoryEntry }}
        {{/each}}
        </tbody>
      </table>
    </div>
  </div>
</template>

<template name="lockedOutHistoryEntry">
  <tr class="lockedOut-history-entry {{cancelled}}">
    <td class="createdAt">{{formatTime createdAt}}</td>
    <td class="claimedAt">{{formatTime claimedAt}}</td>
<!--     <td class="closedAt">{{formatTime closedAt}}</td>
 -->    <td class="requestor">{{requestorName}}</td>
    <td class="claimer">{{claimerName}}</td>
  </tr>
</template>
